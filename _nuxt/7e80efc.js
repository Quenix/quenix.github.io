(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{534:function(e,t,n){"use strict";n.r(t);n(168);var o={name:"BannedPage",middleware:["gamePermission"],data:function(){return{sortBy:"createdAt",sortDesc:!0,snackbar:!1,snackbarText:"",dialog:!1,newEntryDialog:!1,selectedRow:{},search:"",gameId:null,banForm:{robloxUsername:"",robloxId:"",reason:""},headers:[{value:"gameId",text:"Game ID"},{value:"robloxId",text:"Roblox ID"},{value:"robloxUsername",text:"Username"},{value:"modId",text:"Mod. ID"},{value:"modUsername",text:"Mod. Username"},{value:"reason",text:"Reason"},{value:"createdAt",text:"Banned timestamp"},{value:"actions",text:"Actions"}],bannedPlayers:[{gameId:"0",robloxId:"0",robloxUsername:"0",modId:"0",modUsername:"0",reason:"",updatedAt:""}]}},created:function(){var e=this;this.gameId=this.$route.params.id,this.$axios.get("/banned/".concat(this.gameId)).then((function(t){e.bannedPlayers=t.data.players}))},methods:{handleBackButton:function(){this.$router.push("/banned")},handleNewEntryButton:function(){this.newEntryDialog=!0},banPlayer:function(){var e=this;this.$axios.post("/banned",{gameId:this.gameId,robloxId:this.banForm.robloxId,robloxUsername:this.banForm.robloxUsername,modUsername:this.$auth.user.email,modId:"sys-admin",reason:this.banForm.reason}).then((function(t){e.snackbarText=t.data.message,e.newEntryDialog=!1,e.snackbar=!0,e.bannedPlayers.push(t.data.payload),e.banForm={}}))},deleteRow:function(e){var t=this;this.$axios.post("/banned/unban",{gameId:this.gameId,robloxId:e.robloxId,robloxUsername:e.robloxUsername}).then((function(n){t.snackbarText=n.data.message,t.dialog=!1,t.snackbar=!0;var o=t.bannedPlayers.indexOf(e);t.bannedPlayers.splice(o,1)}))},openDialog:function(e){this.dialog=!0,this.selectedRow=e}}},r=n(71),l=n(90),c=n.n(l),d=n(219),m=n(424),v=n(420),x=n(522),h=n(539),f=n(527),y=n(524),k=n(191),w=n(521),I=n(525),_=n(526),D=n(519),component=Object(r.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v("Banned players - "+e._s(this.$route.query.gameName||this.$route.params.id)),n("v-btn",{staticClass:"ml-4",attrs:{color:"error"},on:{click:function(t){return e.handleNewEntryButton()}}},[e._v("Ban player")]),n("v-btn",{staticClass:"ml-4",on:{click:e.handleBackButton}},[e._v("Back")])],1),n("p",[e._v("All players are banned through in-game apps")]),n("div",{staticClass:"BannedPage"},[n("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.bannedPlayers,search:e.search,"item-key":"value","sort-by":e.sortBy,"sort-desc":e.sortDesc},on:{"update:sortBy":function(t){e.sortBy=t},"update:sort-by":function(t){e.sortBy=t},"update:sortDesc":function(t){e.sortDesc=t},"update:sort-desc":function(t){e.sortDesc=t}},scopedSlots:e._u([{key:"default",fn:function(t){return[n("v-text-field",{staticClass:"mx-4",attrs:{label:"Search"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}},{key:"item.actions",fn:function(t){return[n("v-btn",{staticClass:"ml-1",attrs:{color:"error",text:""},on:{click:function(n){return n.stopPropagation(),e.openDialog(t.item)}}},[n("v-icon",[e._v("mdi-delete")])],1)]}}])})],1),n("v-dialog",{attrs:{"max-width":"290"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",{staticClass:"text-h5"},[e._v("Unban this player?")]),n("v-card-text",[e._v("The following player will be unbanned")]),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"error",text:""},on:{click:function(t){return e.deleteRow(e.selectedRow)}}},[e._v("Unban")]),n("v-btn",{attrs:{text:""},on:{click:function(t){e.dialog=!1}}},[e._v("Cancel")])],1)],1)],1),n("v-snackbar",{attrs:{timeout:3e3},scopedSlots:e._u([{key:"action",fn:function(t){var o=t.attrs;return[n("v-btn",e._b({attrs:{color:"blue",text:""},on:{click:function(t){e.snackbar=!1}}},"v-btn",o,!1),[e._v("Close")])]}}]),model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(e._s(e.snackbarText))]),n("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:e.newEntryDialog,callback:function(t){e.newEntryDialog=t},expression:"newEntryDialog"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"text-h5"},[e._v("Ban player")])]),n("v-card-text",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"Player username",required:""},model:{value:e.banForm.robloxUsername,callback:function(t){e.$set(e.banForm,"robloxUsername",t)},expression:"banForm.robloxUsername"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"Player ID",required:""},model:{value:e.banForm.robloxId,callback:function(t){e.$set(e.banForm,"robloxId",t)},expression:"banForm.robloxId"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"Reason",required:""},model:{value:e.banForm.reason,callback:function(t){e.$set(e.banForm,"reason",t)},expression:"banForm.reason"}})],1)],1)],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.banPlayer()}}},[e._v("Save")]),n("v-btn",{attrs:{color:"",text:""},on:{click:function(t){e.newEntryDialog=!1}}},[e._v("Close")])],1)],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;c()(component,{VBtn:d.a,VCard:m.a,VCardActions:v.a,VCardText:v.b,VCardTitle:v.c,VCol:x.a,VContainer:h.a,VDataTable:f.a,VDialog:y.a,VIcon:k.a,VRow:w.a,VSnackbar:I.a,VSpacer:_.a,VTextField:D.a})}}]);